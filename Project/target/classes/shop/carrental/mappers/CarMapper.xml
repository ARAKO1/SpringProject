<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="shop.carrental.mappers.CarMapper">

	<resultMap type="manufacturerDTO" id="manufacturerList">
		<id property="seq" column="seq" />
		<result property="name" column="name" />
		<result property="english_name" column="english_name" />
	</resultMap>

	<resultMap type="segmentDTO" id="segmentList">
		<id property="seq" column="seq" />
		<result property="name" column="name" />
		<result property="description" column="description" />
	</resultMap>

	<resultMap type="carDTO" id="carList">
		<id property="seq" column="seq" />
		<result property="model" column="model" />
		<result property="description" column="description" />
		<result property="year" column="year" />
		<result property="image_seq" column="image_seq" />
		<result property="segment_seq" column="segment_seq" />
		<result property="fuel_seq" column="fuel_seq" />
		<result property="manufacturer_seq" column="manufacturer_seq" />
	</resultMap>

	<select id="listManufacturer" resultMap="manufacturerList">
		<![CDATA[
			SELECT*FROM MANUFACTURER
		]]>
	</select>

	<select id="listSegment" resultMap="segmentList">
		<![CDATA[
			SELECT*FROM SEGMENT
		]]>
	</select>

	<select id="listCar" resultMap="carList">
		<![CDATA[
			SELECT C.SEQ,C.MODEL,C.DESCRIPTION,C.YEAR,C.IMAGE_SEQ IMAGE,S.NAME SEGMENT,F.NAME FUEL,M.NAME MANUFACTURER
				FROM
					CAR C,
					SEGMENT S,
					MANUFACTURER M,
					FUEL F
				WHERE
						C.SEGMENT_SEQ=S.SEQ
					AND
						C.MANUFACTURER_SEQ=M.SEQ
					AND
						C.FUEL_SEQ=F.SEQ
					AND
						M.SEQ=#{manufacturer_seq}
					AND
						S.SEQ=#{segment_seq}
		]]>
	</select>

</mapper>